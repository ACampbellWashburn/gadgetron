add_subdirectory(core)
add_subdirectory(webinterface)

if (CUDA_FOUND)
add_subdirectory(grappa)
add_subdirectory(cgsense)
if (NOT WIN32)
	add_subdirectory(spiral)
endif (NOT WIN32)
endif(CUDA_FOUND)

find_package(Octave)
if (NOT WIN32 AND OCTAVE_FOUND)
	add_subdirectory(octave)
endif(NOT WIN32 AND OCTAVE_FOUND)

find_package(Matlab)
if (MATLAB_FOUND)
    message("MATLAB FOUND: ${MATLAB_INCLUDE_DIR}")
    add_subdirectory(matlab)
else(MATLAB_FOUND)
    message("MATLAB NOT FOUND: ${MATLAB_INCLUDE_DIR}")
endif(MATLAB_FOUND)

if (BLAS_FOUND AND LAPACK_FOUND)
	MESSAGE("Compiling optimized (BLAS/LAPACK) MRI Gadgets")
	add_subdirectory(mri_core)
endif (BLAS_FOUND AND LAPACK_FOUND)

find_package(Boost COMPONENTS python)
if (Boost_PYTHON_FOUND AND PYTHONLIBS_FOUND AND PYTHON_NUMPY_FOUND)
   MESSAGE("Compiling Python Gadgets")
   MESSAGE("PYTHON_NUMPY_INCLUDE_DIR: ${PYTHON_NUMPY_INCLUDE_DIR}")
   MESSAGE("PYTHON_LIBRARIES: ${PYTHON_LIBRARIES}")
   MESSAGE("PYTHON_INCLUDE_DIRS: ${PYTHON_INCLUDE_DIRS}")
   add_subdirectory(python)
endif(Boost_PYTHON_FOUND AND PYTHONLIBS_FOUND AND PYTHON_NUMPY_FOUND)
