<?xml version="1.0" encoding="UTF-8"?>
<gadgetronStreamConfiguration xsi:schemaLocation="http://gadgetron.sf.net/gadgetron gadgetron.xsd"
        xmlns="http://gadgetron.sf.net/gadgetron"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        
    <reader>
      <slot>1008</slot>
      <dll>gadgetron_mricore</dll>
      <classname>GadgetIsmrmrdAcquisitionMessageReader</classname>
    </reader>
  
    <writer>
      <slot>1004</slot>
      <dll>gadgetron_mricore</dll>
      <classname>MRIImageWriterCPLX</classname>
    </writer>
    <writer>
      <slot>1005</slot>
      <dll>gadgetron_mricore</dll>
      <classname>MRIImageWriterFLOAT</classname>
    </writer>
    <writer>
      <slot>1006</slot>
      <dll>gadgetron_mricore</dll>
      <classname>MRIImageWriterUSHORT</classname>
    </writer>
  
    <!--Prewhiten -->
    <gadget>
      <name>NoiseAdjust</name>
      <dll>gadgetron_mricore</dll>
      <classname>NoiseAdjustGadget</classname>
    </gadget>
  
    <!-- Grid and FT to x -->
    <gadget>
      <name>ReconX</name>
      <dll>gadgetron_epi</dll>
      <classname>EPIReconXGadget</classname>
    </gadget>

    <!-- Apply EPI corrections -->
    <gadget>
      <name>EPICorr</name>
      <dll>gadgetron_epi</dll>
      <classname>EPICorrGadget</classname>
    </gadget>

    <!-- FFT in X back to k -->
    <gadget>
        <name>FFTX</name>
        <dll>gadgetron_epi</dll>
        <classname>FFTXGadget</classname>
    </gadget>

    <!-- Accumulate and trigger
            1 bucket for each slice 
            trigger on every repetition -->
    <gadget>
        <name>AccTrig</name>
        <dll>gadgetron_mricore</dll>
	<classname>AcquisitionAccumulateTriggerGadget</classname>
        <property>
            <name>trigger_dimension</name>
            <value>repetition</value>
        </property>
        <property>
          <name>sorting_dimension</name>
          <value>slice</value>
        </property>
    </gadget>

    <!-- Convert from bucket to buffer
            1 buffer per slice -->
    <gadget>
        <name>Buff</name>
        <dll>gadgetron_mricore</dll>
	<classname>BucketToBufferGadget</classname>
        <property>
            <name>N_dimension</name>
            <value>contrast</value>
        </property>
        <property>
          <name>S_dimension</name>
          <value>phase</value>
        </property>
        <property>
          <name>split_slices</name>
          <value>true</value>
        </property>
        <property>
          <name>ignore_segment</name>
          <value>true</value>
        </property>
    </gadget>


</gadgetronStreamConfiguration>
