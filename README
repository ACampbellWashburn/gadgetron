

-Prerequisites for building:

gadgetron
  ACE (tested with versions 5.6 and 6.0)
  (See instructions for MAC below)

  TinyXML version >= 2.6.1
  (Included in depedencies/, make; make install)

gadgetron/gadgets/core
  FFTW3
  (See instructions for MAC below)

gadgetron/gadgets/gpucg
  CUDA (in /usr/local/cuda)
  thrust (in /usr/local/cuda/include)
  NVIDIA Cuda SDK (in ~/NVIDIA_GPU_Computing_SDK/)
  CUDPP (recompiled with -fPIC)
     Normally distributed with NVIDIA SDK (but not PIC)

-------------------------------------
Building instructions

Because the layout of the various libraries is not quite set yet.
There are some (counter intuitive) steps to build.

1.  Checkout source code: 
    git clone ssh://username@137.187.134.61/home/gitrepos/gadgetron.git

2.  cd gadgetron/
3.  make; make install
4.  cd toolboxes/gadgettools/
5.  make; make install
6.  cd ../ndarray/
7.  make; make install
8.  cd ../../gadgets/core/
9.  make;make install
10.  cd ../../gpucg/
11. make; make install

To run the gadgetron
1.  cd lib/
2.  ./gadgetron

To feed data into the gadgetron
1.  cd gadgetron/gadgetdatasender/
2.  make
3.  ./gadgetdatasender -f filname.dat -c configuration_file.xml

------------------------------------
ACE Install instructions on Mac (Snow Leopard)
 - Compiling universal binaries

1. Download ACE-6.0.0.tar.gz
2. tar -xzvf ACE-6.0.0.tar.gz
3. cd ACE_wrappers
4. edit (and create) ace/config.h

   #include "ace/config-macosx-snowleopard.h"

5. edit (and create) include/makeinclude/platform_macros.GNU

   include $(ACE_ROOT)/include/makeinclude/platform_macosx_snowleopard.GNU
   INSTALL_PREFIX=/usr/local
   install_rpath=0

6. export ACE_ROOT=/whereever/ACE_wrappers
7. export buildbits=universal
8. make (go for coffee)
9. sudo ACE_ROOT=/whereever/ACE_wrappers make install
10. sudo cp lib/libACE* /usr/local/lib (don't know why make install doesn't do that)

-------------------------------------
Compiling FFTW as universal library

1. Download fftw-3.2.2.tar.gz
2. tar -xzvf fftw-3.2.2.tar.gz
3. cd fftw-3.2.2
4. ./configure --enable-threads --enable-single CC="gcc -arch i386 -arch x86_64" CXX="g++ -arch i386 -arch x86_64" CPP="gcc -E" CXXCPP="g++ -E"
5. make
6. sudo make install
7. ./configure --enable-threads CC="gcc -arch i386 -arch x86_64" CXX="g++ -arch i386 -arch x86_64" CPP="gcc -E" CXXCPP="g++ -E"
8. make clean; make
9. sudo make install

-------
Tools for Mac:

- gfortran:
http://gcc.gnu.org/wiki/GFortranBinaries#MacOS

-on MAGMA
in make.inc, change to Tesla architecture
remove "-zmuldefs"
